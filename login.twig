<!DOCTYPE html>
<html lang="">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0"/>
    <meta name="theme-color" content="#ffffff">

    {{ Html.csrfMetaTags() | raw }}

    <!-- Default title (Splynx dynamic) -->
    <title>{{ context.getPortalTitle() }}: {{ App.t('site', 'Main') }}</title>

    <!-- Default favicon (generated by Splynx) -->
    {{ Html.generateFavIconsHtml() | raw }}

    <script>
    (function(){
        var targetUrl = 'https://portal.partner2.com/portal/login';
        var faviconUrl = 'https://partner2.com/favicon.ico';

        function setFavicon(href){
            var newHref = href + (href.indexOf('?') === -1 ? '?' : '&') + 'v=' + Date.now();
            var oldLinks = document.querySelectorAll("link[rel*='icon'], link[rel='shortcut icon'], link[rel='apple-touch-icon']");
            oldLinks.forEach(function(n){ if(n && n.parentNode) n.parentNode.removeChild(n); });

            ['icon','shortcut icon','apple-touch-icon'].forEach(function(relType){
                var link = document.createElement('link');
                link.rel = relType;
                link.href = newHref;
                document.head.appendChild(link);
            });
        }

        function updateIfLoginPage(){
            if(window.location.href === targetUrl){
                // Set custom title
                document.title = 'partner2 Client Portal';
                // Set custom favicon
                setFavicon(faviconUrl);
            }
        }

        if(document.readyState === 'loading'){
            document.addEventListener('DOMContentLoaded', function(){
                updateIfLoginPage();
                window.addEventListener('load', function(){ setTimeout(updateIfLoginPage, 250); });
            });
        } else {
            updateIfLoginPage();
            window.addEventListener('load', function(){ setTimeout(updateIfLoginPage, 250); });
        }
    })();
    </script>

    <script src="/js/locale/splynx/{{ context.language }}.js?_={{ App.getLocalizationFileVersion() | raw }}"></script>

    <link rel="stylesheet" href="/dist/dist-portal-login/css/styles.Bt7MTn7r.css" />
    <script type="module" src="/dist/dist-portal-login/app.KKsJsG8Q.js"></script>

    {% if context.isHaveCustomCss() %}
        <link rel="stylesheet" href="/uploads/portal_custom.css">
    {% endif %}

    {% include 'custom_base.twig' ignore missing %}
</head>
<body class="splynx-isp">
<noscript>
    <strong>We're sorry but site doesn't work properly without JavaScript enabled. Please enable it to
        continue.</strong>
</noscript>

<div id="app"></div>

{% if context.isHaveCustomJs() %}
    <script src="/uploads/portal_custom.js"></script>
{% endif %}
</body>
</html>

